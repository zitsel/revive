<h1>Listing transactions</h1>

<table border="1">
  <tr>
    <th>ID</th>
    <th>Date</th>
    <th>Completed By</th>
    <th>Approved By</th>
    <th>Approved Amount</th>
    <th>Actual Amount</th>
    <th>Discrepancy</th>
    <th>Items Count</th>
    <th>Account</th>
    <th>Ref #</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @transactions.each do |transaction| %>
  <tr>
    <td><%= transaction.id%></td>
    <td><%= transaction.date %></td>
    <td><%= transaction.completed_by %></td>
    <td><%= transaction.approved_by %></td>
    <td><%= transaction.approved_amount %></td>
    <td><%= transaction.items.sum(:purchase_price).round(2)%></td>
    <td><%= (transaction.approved_amount.to_d-transaction.items.sum(:purchase_price)).round(2)%></td>
    <td><%= transaction.items.count %></td>
    <td><%= transaction.account %></td>
    <td><%= transaction.account_reference_number %></td>
    <td><%= link_to 'Show', transaction %></td>
    <td><%= link_to 'Edit', edit_transaction_path(transaction) %></td>
    <td><%= link_to 'Destroy', transaction, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Transaction', new_transaction_path %>
